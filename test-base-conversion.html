<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é€²åˆ¶è½‰æ›é©—è­‰æ¸¬è©¦</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .test-input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            padding: 10px 20px;
            background: #007cba;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #005a87;
        }
    </style>
</head>
<body>
    <h1>ğŸ§® é€²åˆ¶è½‰æ›é©—è­‰æ¸¬è©¦</h1>
    
    <div class="test-container">
        <h3>é è¨­æ¸¬è©¦æ¡ˆä¾‹</h3>
        <button onclick="runPresetTests()">åŸ·è¡Œé è¨­æ¸¬è©¦</button>
        <div id="preset-results"></div>
    </div>
    
    <div class="test-container">
        <h3>è‡ªè¨‚é€²åˆ¶è½‰æ›æ¸¬è©¦</h3>
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px;">
            <div>
                <label>è¼¸å…¥æ•¸å­—:</label>
                <input type="text" id="input-number" class="test-input" value="8k2n0" placeholder="è¼¸å…¥æ•¸å­—">
            </div>
            <div>
                <label>ä¾†æºé€²åˆ¶:</label>
                <input type="number" id="from-base" class="test-input" min="2" max="36" value="33" placeholder="ä¾†æºé€²åˆ¶">
            </div>
            <div>
                <label>ç›®æ¨™é€²åˆ¶:</label>
                <input type="number" id="to-base" class="test-input" min="2" max="36" value="10" placeholder="ç›®æ¨™é€²åˆ¶">
            </div>
        </div>
        <button onclick="testCustomConversion()">è½‰æ›</button>
        <div id="custom-results"></div>
    </div>
    
    <div class="test-container">
        <h3>å­—ç¬¦ç·¨ç¢¼æ¨¡å¼æ¸¬è©¦</h3>
        <p>é€™å€‹æ¨¡å¼å°‡æ–‡å­—å­—ç¬¦è½‰æ›ç‚ºå…¶ Unicode ç·¨ç¢¼ï¼Œç„¶å¾Œè½‰ç‚ºæŒ‡å®šé€²åˆ¶</p>
        <input type="text" id="text-input" class="test-input" value="Hello" placeholder="è¼¸å…¥æ–‡å­—">
        <input type="number" id="text-base" class="test-input" min="2" max="36" value="16" placeholder="ç›®æ¨™é€²åˆ¶">
        <button onclick="testTextEncoding()">ç·¨ç¢¼æ–‡å­—</button>
        <button onclick="testTextDecoding()">è§£ç¢¼æ–‡å­—</button>
        <div id="text-results"></div>
    </div>
    
    <script src="src/utils/encoders.js"></script>
    <script>
        function runPresetTests() {
            const resultsDiv = document.getElementById('preset-results');
            let html = '<h4>æ¸¬è©¦çµæœ:</h4>';
            
            const testCases = [
                { input: "8k2n0", fromBase: 33, toBase: 10, expected: "14373468" },
                { input: "FF", fromBase: 16, toBase: 10, expected: "255" },
                { input: "255", fromBase: 10, toBase: 16, expected: "FF" },
                { input: "1010", fromBase: 2, toBase: 10, expected: "10" },
                { input: "10", fromBase: 10, toBase: 2, expected: "1010" },
                { input: "Z", fromBase: 36, toBase: 10, expected: "35" },
            ];
            
            testCases.forEach((testCase, index) => {
                try {
                    const result = baseConvert(testCase.input, testCase.fromBase, testCase.toBase);
                    const isCorrect = result === testCase.expected;
                    const status = isCorrect ? 'success' : 'error';
                    const statusText = isCorrect ? 'âœ… é€šé' : 'âŒ å¤±æ•—';
                    
                    html += `
                        <div class="result ${status}">
                            <strong>æ¸¬è©¦ ${index + 1}:</strong> ${testCase.input} (${testCase.fromBase}é€²åˆ¶) â†’ ${testCase.toBase}é€²åˆ¶<br>
                            <strong>é æœŸ:</strong> ${testCase.expected}<br>
                            <strong>å¯¦éš›:</strong> ${result}<br>
                            <strong>ç‹€æ…‹:</strong> ${statusText}
                        </div>
                    `;
                } catch (error) {
                    html += `
                        <div class="result error">
                            <strong>æ¸¬è©¦ ${index + 1}:</strong> ${testCase.input} (${testCase.fromBase}é€²åˆ¶) â†’ ${testCase.toBase}é€²åˆ¶<br>
                            <strong>éŒ¯èª¤:</strong> ${error.message}
                        </div>
                    `;
                }
            });
            
            resultsDiv.innerHTML = html;
        }
        
        function testCustomConversion() {
            const input = document.getElementById('input-number').value;
            const fromBase = parseInt(document.getElementById('from-base').value);
            const toBase = parseInt(document.getElementById('to-base').value);
            const resultsDiv = document.getElementById('custom-results');
            
            try {
                const result = baseConvert(input, fromBase, toBase);
                resultsDiv.innerHTML = `
                    <div class="result success">
                        <strong>è½‰æ›çµæœ:</strong><br>
                        ${input} (${fromBase}é€²åˆ¶) = ${result} (${toBase}é€²åˆ¶)
                    </div>
                `;
            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="result error">
                        <strong>è½‰æ›éŒ¯èª¤:</strong> ${error.message}
                    </div>
                `;
            }
        }
        
        function testTextEncoding() {
            const input = document.getElementById('text-input').value;
            const base = parseInt(document.getElementById('text-base').value);
            const resultsDiv = document.getElementById('text-results');
            
            try {
                const result = customBaseEncode(input, base);
                resultsDiv.innerHTML = `
                    <div class="result success">
                        <strong>æ–‡å­—ç·¨ç¢¼çµæœ:</strong><br>
                        "${input}" â†’ ${result} (Base${base})
                    </div>
                `;
            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="result error">
                        <strong>ç·¨ç¢¼éŒ¯èª¤:</strong> ${error.message}
                    </div>
                `;
            }
        }
        
        function testTextDecoding() {
            const input = document.getElementById('text-input').value;
            const base = parseInt(document.getElementById('text-base').value);
            const resultsDiv = document.getElementById('text-results');
            
            try {
                // å‡è¨­è¼¸å…¥æ¡†ä¸­æ˜¯ç·¨ç¢¼å¾Œçš„çµæœ
                const result = customBaseDecode(input, base);
                resultsDiv.innerHTML = `
                    <div class="result success">
                        <strong>æ–‡å­—è§£ç¢¼çµæœ:</strong><br>
                        ${input} (Base${base}) â†’ "${result}"
                    </div>
                `;
            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="result error">
                        <strong>è§£ç¢¼éŒ¯èª¤:</strong> ${error.message}
                    </div>
                `;
            }
        }
        
        // é é¢è¼‰å…¥æ™‚è‡ªå‹•åŸ·è¡Œæ¸¬è©¦
        window.addEventListener('load', function() {
            console.log('æª¢æŸ¥å‡½æ•¸è¼‰å…¥ç‹€æ…‹:', {
                baseConvert: typeof baseConvert,
                customBaseEncode: typeof customBaseEncode,
                customBaseDecode: typeof customBaseDecode
            });
            
            // è‡ªå‹•åŸ·è¡Œé è¨­æ¸¬è©¦
            setTimeout(runPresetTests, 100);
        });
    </script>
</body>
</html>
