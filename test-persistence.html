<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•¸æ“šæŒä¹…åŒ–æ¸¬è©¦</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .info-box {
            background: #e3f2fd;
            border: 1px solid #1976d2;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
        }
        .warning-box {
            background: #fff3e0;
            border: 1px solid #f57c00;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #0056b3; }
        button.danger {
            background: #dc3545;
        }
        button.danger:hover {
            background: #c82333;
        }
        pre {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #dee2e6;
            overflow-x: auto;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ”„ æ•¸æ“šæŒä¹…åŒ–åŠŸèƒ½æ¸¬è©¦</h1>
        
        <div class="info-box">
            <h3>ğŸ“‹ æ¸¬è©¦èªªæ˜</h3>
            <p>æ­¤æ¸¬è©¦é é¢æ¨¡æ“¬æ“´å……åŠŸèƒ½çš„æ•¸æ“šæŒä¹…åŒ–åŠŸèƒ½ï¼Œä½¿ç”¨ localStorage å„²å­˜å’Œæ¢å¾©ä½¿ç”¨è€…è¼¸å…¥çš„æ•¸æ“šã€‚</p>
        </div>

        <div class="warning-box">
            <h3>âš ï¸ é‡è¦æé†’</h3>
            <p>åœ¨å¯¦éš›çš„ Chrome æ“´å……åŠŸèƒ½ä¸­ï¼Œå»ºè­°ä½¿ç”¨ <code>chrome.storage.local</code> è€Œé <code>localStorage</code>ï¼Œå› ç‚ºæ“´å……åŠŸèƒ½çš„ localStorage åœ¨æŸäº›æƒ…æ³ä¸‹å¯èƒ½æœƒè¢«æ¸…é™¤ã€‚</p>
        </div>

        <h3>ğŸ§ª æ¸¬è©¦æ­¥é©Ÿ</h3>
        <ol>
            <li>åœ¨ä¸‹æ–¹ popup ä»‹é¢ä¸­è¼¸å…¥ä¸€äº›æ•¸æ“š</li>
            <li>åˆ‡æ›ä¸åŒçš„åˆ†é å’Œè¨­å®š</li>
            <li>é»æ“Šã€Œé‡æ–°è¼‰å…¥é é¢ã€æ¨¡æ“¬é‡æ–°é–‹å•Ÿæ“´å……åŠŸèƒ½</li>
            <li>æª¢æŸ¥æ•¸æ“šæ˜¯å¦æˆåŠŸæ¢å¾©</li>
        </ol>

        <div style="text-align: center; margin: 20px 0;">
            <button onclick="location.reload()">ğŸ”„ é‡æ–°è¼‰å…¥é é¢</button>
            <button onclick="clearStoredData()" class="danger">ğŸ—‘ï¸ æ¸…é™¤å„²å­˜æ•¸æ“š</button>
            <button onclick="showStoredData()">ğŸ“Š æŸ¥çœ‹å„²å­˜æ•¸æ“š</button>
        </div>

        <div id="storage-info" class="status" style="display: none;"></div>
    </div>

    <!-- æ¨¡æ“¬ popup ä»‹é¢ -->
    <div class="test-container">
        <h2>ğŸ“± æ¨¡æ“¬æ“´å……åŠŸèƒ½ä»‹é¢</h2>
        
        <!-- ç›´æ¥åµŒå…¥ popup HTML çµæ§‹ -->
        <div style="border: 2px solid #007bff; border-radius: 8px; padding: 20px; background: #f9f9f9;">
            <link rel="stylesheet" href="src/popup/popup.css">
            
            <div class="container">
                <h1>ç·¨ç¢¼/è§£ç¢¼å™¨</h1>
                
                <!-- åŠŸèƒ½é¸æ“‡æ¨™ç±¤ -->
                <div class="tab-container">
                    <button class="tab-button active" id="encode-tab">ç·¨ç¢¼/è§£ç¢¼</button>
                    <button class="tab-button" id="convert-tab">é€²åˆ¶è½‰æ›</button>
                </div>
                
                <!-- ç·¨ç¢¼/è§£ç¢¼å€å¡Š -->
                <div class="tab-content active" id="encode-section">
                    <div class="mode-selection">
                        <label>
                            <input type="radio" name="mode" value="encode" checked>
                            ç·¨ç¢¼
                        </label>
                        <label>
                            <input type="radio" name="mode" value="decode">
                            è§£ç¢¼
                        </label>
                    </div>
                    
                    <textarea id="input" placeholder="è¼¸å…¥è¦è™•ç†çš„å…§å®¹"></textarea>
                    
                    <div class="format-selection">
                        <label>é¸æ“‡æ ¼å¼:</label>
                        <select id="format">
                            <option value="base64">Base64</option>
                            <option value="base58">Base58</option>
                        </select>
                    </div>
                    
                    <div class="action-button">
                        <button id="process">è™•ç†</button>
                    </div>
                    
                    <h2>çµæœ</h2>
                    <textarea id="output" placeholder="è™•ç†çµæœ" readonly></textarea>
                </div>
                
                <!-- é€²åˆ¶è½‰æ›å€å¡Š -->
                <div class="tab-content" id="convert-section">
                    <div class="convert-input-group">
                        <div class="base-input-row">
                            <div class="base-input-half">
                                <label>ä¾†æºé€²åˆ¶ (2-36):</label>
                                <input type="number" id="fromBase" min="2" max="36" value="36" placeholder="ä¾†æºé€²åˆ¶">
                            </div>
                            <div class="base-input-half">
                                <label>ç›®æ¨™é€²åˆ¶ (2-36):</label>
                                <input type="number" id="toBase" min="2" max="36" value="10" placeholder="ç›®æ¨™é€²åˆ¶">
                            </div>
                        </div>
                        
                        <label>è¼¸å…¥æ•¸å­—:</label>
                        <textarea id="convertInput" placeholder="è¼¸å…¥è¦è½‰æ›çš„æ•¸å­—" rows="3"></textarea>
                        
                        <div class="action-button">
                            <button id="convertButton">è½‰æ›</button>
                            <button id="clearButton" class="secondary">æ¸…é™¤</button>
                        </div>
                    </div>
                    
                    <h2>è½‰æ›çµæœ</h2>
                    <textarea id="convertOutput" placeholder="è½‰æ›çµæœ" readonly></textarea>
                    
                    <div class="base-reference">
                        <small>
                            <strong>é€²åˆ¶åƒè€ƒ:</strong> 
                            2é€²åˆ¶(0,1) | 8é€²åˆ¶(0-7) | 10é€²åˆ¶(0-9) | 16é€²åˆ¶(0-9,A-F) | 36é€²åˆ¶(0-9,A-Z)
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="src/utils/encoders.js"></script>
    <script src="src/popup/popup.js"></script>
    <script>
        function clearStoredData() {
            localStorage.removeItem('encoderExtensionData');
            showMessage('âœ… å„²å­˜æ•¸æ“šå·²æ¸…é™¤', 'success');
            setTimeout(() => location.reload(), 1000);
        }

        function showStoredData() {
            const data = localStorage.getItem('encoderExtensionData');
            const infoDiv = document.getElementById('storage-info');
            
            if (data) {
                const parsedData = JSON.parse(data);
                infoDiv.innerHTML = `
                    <h4>ğŸ“Š ç•¶å‰å„²å­˜çš„æ•¸æ“šï¼š</h4>
                    <pre>${JSON.stringify(parsedData, null, 2)}</pre>
                `;
                infoDiv.className = 'status success';
            } else {
                infoDiv.innerHTML = '<h4>ğŸ“­ æ²’æœ‰å„²å­˜ä»»ä½•æ•¸æ“š</h4>';
                infoDiv.className = 'status error';
            }
            infoDiv.style.display = 'block';
        }

        function showMessage(message, type) {
            const infoDiv = document.getElementById('storage-info');
            infoDiv.innerHTML = `<h4>${message}</h4>`;
            infoDiv.className = `status ${type}`;
            infoDiv.style.display = 'block';
        }

        // é é¢è¼‰å…¥æ™‚é¡¯ç¤ºå„²å­˜ç‹€æ…‹
        window.addEventListener('load', function() {
            setTimeout(showStoredData, 500);
        });
    </script>
</body>
</html>
